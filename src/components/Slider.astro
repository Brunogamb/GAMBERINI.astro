---
import { Image } from 'astro:assets';
import wilo from '../assets/marcas/Wilo.webp';
import grundfos from '../assets/marcas/Grundfos.webp';
import dab from '../assets/marcas/DAB.webp';
import motorarg from '../assets/marcas/Motorarg.webp';
import genebre from '../assets/marcas/GENEBRE.webp';
import pedrollo from '../assets/marcas/Pedrollo.webp';
import rotorpump from '../assets/marcas/RotorPump.webp';
---

<div class="slider">
    <div class="slide-track">
        <a class="slide" href="https://wilo.com/ar/es/" target="_blank"><Image src={wilo} alt="Logo 1" loading="lazy" /></a>
        <a class="slide" href="https://www.grundfos.com/ar/" target="_blank"><Image src={grundfos} alt="Logo 2" loading="lazy" /></a>
        <a class="slide" href="https://www.dabpumps.com/" target="_blank"><Image src={dab} alt="Logo 3" loading="lazy" /></a>
        <a class="slide" href="https://www.motorarg.com.ar/" target="_blank"><Image src={motorarg} alt="Logo 4" loading="lazy" /></a>
        <a class="slide" href="https://www.genebre.com.ar/" target="_blank"><Image src={genebre} alt="Logo 5" loading="lazy" /></a>
        <a class="slide" href="https://www.pedrollo.com/es/" target="_blank"><Image src={pedrollo} alt="Logo 6" loading="lazy" /></a>
        <a class="slide" href="https://rotorpump.com/" target="_blank"><Image src={rotorpump} alt="Logo 7" loading="lazy" /></a>
        
        <a class="slide" href="https://wilo.com/ar/es/" target="_blank"><Image src={wilo} alt="Logo 1" loading="lazy" /></a>
        <a class="slide" href="https://www.grundfos.com/ar/" target="_blank"><Image src={grundfos} alt="Logo 2" loading="lazy" /></a>
        <a class="slide" href="https://www.dabpumps.com/" target="_blank"><Image src={dab} alt="Logo 3" loading="lazy" /></a>
        <a class="slide" href="https://www.motorarg.com.ar/" target="_blank"><Image src={motorarg} alt="Logo 4" loading="lazy" /></a>
        <a class="slide" href="https://www.genebre.com.ar/" target="_blank"><Image src={genebre} alt="Logo 5" loading="lazy" /></a>
        <a class="slide" href="https://www.pedrollo.com/es/" target="_blank"><Image src={pedrollo} alt="Logo 6" loading="lazy" /></a>
        <a class="slide" href="https://rotorpump.com/" target="_blank"><Image src={rotorpump} alt="Logo 7" loading="lazy" /></a>

        <a class="slide" href="https://wilo.com/ar/es/" target="_blank"><Image src={wilo} alt="Logo 1" loading="lazy" /></a>
        <a class="slide" href="https://www.grundfos.com/ar/" target="_blank"><Image src={grundfos} alt="Logo 2" loading="lazy" /></a>
    </div>
</div>

<style>
.slider {
    width: 100%;
    margin: 50px auto;
    overflow: hidden;
    -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
    mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
}

.slider .slide-track {
    display: flex;
    animation: scroll 30s linear infinite;
    gap: 60px;
    padding: 20px 0;
    height: 60px;
}

.slide {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
}

.slide img {
    max-width: 200px;
    object-fit: contain;
    transition: 0.2s ease;
}

.slide-track img:hover {
    transform: scale(1.08);
}


@keyframes scroll{
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-1592px);
    }
}

@media (hover: hover) and (pointer: fine) {
    .slider:hover .slide-track {
        animation-play-state: paused;
    }
}
</style>

<script type="module">
    document.addEventListener("DOMContentLoaded", () => {
        const track = document.querySelector('.slide-track');
        if (!track) return;

        let isHovered = false;
        let isVisible = true;
        let scrollWidth = track.scrollWidth;
        let duration = 30; 
        let start = null;

        function animateScroll(timestamp) {
            if (!start) start = timestamp;
            const elapsed = (timestamp - start) / 1000;
            if (!isHovered && isVisible) {
                const progress = (elapsed % duration) / duration;
                track.style.transform = `translateX(${-scrollWidth * progress}px)`;
            }
            requestAnimationFrame(animateScroll);
        }

        function updateScrollWidth() {
            scrollWidth = track.scrollWidth;
        }

        updateScrollWidth();
        window.addEventListener('resize', updateScrollWidth);

        track.addEventListener('mouseenter', () => {
            isHovered = true;
        });
        track.addEventListener('mouseleave', () => {
            isHovered = false;
        });

        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach(entry => {
                    isVisible = entry.isIntersecting;
                });
            },
            { threshold: 0.1 }
        );
        observer.observe(track);

        requestAnimationFrame(animateScroll);
    });

</script>